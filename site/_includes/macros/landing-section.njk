{% from 'macros/icon.njk' import icon with context %}
{% from 'macros/landing-deco.njk' import landingDeco with context %}

{% macro landingSection(title, desc, items, color, type, imgSrc, imgAlt, imgWidth, imgHeight) %}
<section
  class="landing-section landing-section--{{type}} hairline rounded-lg width-full display-grid gap-top-400"
  style="--primary-color: var(--color-{{ color }}-medium); --dot-color: var(--color-{{ color }}-lighter);">

  {{ landingDeco(title, desc, color, imgSrc, imgAlt, imgWidth, imgHeight) }}

  <div class="gap-top-200 gap-left-200 gap-right-200">
    <div class="landing-section__links">
      {% for item in items %}

        {% set post = null %} {# Reset #}
        {% if item.url and item.title and item.description %}
          {% set post = item %}
        {% else %}
          {% set post = helpers.findByUrl(collections.all, item.url, locale) %}
        {% endif %}

        {% if post %}
          {% set icons = {
            blogPost: 'blog',
            doc: 'docs',
            article: 'articles'
          } %}
          {% set iconName = icons[post.data.type] or 'articles' %}
          {% if type === 'top-3' or type === 'top-4' %}
            <div class="item__outer">
              <div class="item {% if not loop.last %} gap-bottom-400 {% endif %} height-full">
                <div class="item__inner height-full display-flex direction-column">
                  <div class="item__title">
                    <a href="{{ post.url }}">{{ post.title or post.data.title }}</a>
                  </div>
                  <p class="desc flex-1">{{ post.description or post.data.description }}</p>
                    <div class="gap-bottom-200 color-primary">
                      <a href="{{ post.url }}">{{ icon(iconName) }}</a>
                    </div>
                </div>
              </div>
            </div>
          {% else %}
            <div class="item {% if not loop.last %} gap-bottom-400 {% endif %} height-full">
              <div class="item__inner
                height-full
                {% if not loop.last %}
                  hairline-bottom pad-bottom-400
                {% endif %}">
                <div class="item__title"><a href="{{ post.url }}">{{ post.title or post.data.title }}
                  {% if type === 'right' %}<span class="gap-left-100 color-primary">{{ icon(iconName) }}</span>{% endif %} </a></div>
                <p class="desc flex-1">{{ post.description or post.data.description }}</p>
                {% if type === 'left' %}
                  <div class="gap-bottom-200 color-primary">
                    <a href="{{ post.url }}">{{ icon(iconName) }}</a>
                  </div>
                {% endif %}
              </div>
            </div>
          {% endif %}
        {% endif %}
      {% endfor %}
    </div>
  </div>

</section>
{% endmacro %}
